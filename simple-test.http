### üîß CORRECTED API TESTS - 100% SUCCESS TARGET
### Universal Student API v2.0 - Fixed Version

@baseURL = https://universal-student-api-production.up.railway.app

# Variables will be set after login
@userToken = {{userLogin.response.body.data.token}}
@adminToken = {{adminLogin.response.body.data.token}}

###############################################
# üîß CORRECTED AUTHENTICATION TESTS
###############################################

### ‚úÖ TEST 6: User Login (Demo Account) - CORRECTED
# @name userLogin
POST {{baseURL}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "demo",
  "password": "demo123"
}

### ‚úÖ TEST 7: Admin Login (Teacher Account) - CORRECTED  
# @name adminLogin
POST {{baseURL}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "teacher",
  "password": "demo123"
}

### ‚úÖ TEST 8: User Registration (Unique User) - CORRECTED
# @name newUserRegistration
POST {{baseURL}}/api/v1/auth/register
Content-Type: application/json

{
  "username": "student{{$timestamp}}",
  "email": "student{{$timestamp}}@example.com",
  "password": "student123",
  "first_name": "Student",
  "last_name": "Test"
}

### ‚úÖ TEST 9: Get User Profile (Protected) - CORRECTED
GET {{baseURL}}/api/v1/auth/profile
Authorization: Bearer {{userToken}}

### ‚úÖ TEST 10: Update User Profile - CORRECTED
PUT {{baseURL}}/api/v1/auth/profile
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "first_name": "Updated",
  "last_name": "User"
}

### ‚úÖ TEST 11: Admin - Get All Users - CORRECTED
GET {{baseURL}}/api/v1/auth/users
Authorization: Bearer {{adminToken}}

###############################################
# üîß CORRECTED PRODUCT ID TESTS
###############################################

### ‚úÖ TEST 48: Music - Single Album - CORRECTED ID
GET {{baseURL}}/api/v1/music/products/3001

### ‚úÖ TEST 53: Food - Single Food Item - CORRECTED ID
GET {{baseURL}}/api/v1/food/products/3501

### ‚úÖ TEST 58: Toys - Single Toy - CORRECTED ID
GET {{baseURL}}/api/v1/toys/products/4001

### ‚úÖ TEST 63: Hotels - Single Hotel - CORRECTED ID
GET {{baseURL}}/api/v1/hotels/products/4501

### ‚úÖ TEST 68: Cars - Single Car - CORRECTED ID
GET {{baseURL}}/api/v1/cars/products/5001

### ‚úÖ TEST 73: Sports - Single Sports Item - CORRECTED ID
GET {{baseURL}}/api/v1/sports/products/9001

### ‚úÖ TEST 78: Tools - Single Tool - CORRECTED ID
GET {{baseURL}}/api/v1/tools/products/9501

### ‚úÖ TEST 83: Medicines - Single Medicine - CORRECTED ID
GET {{baseURL}}/api/v1/medicines/products/5501

### ‚úÖ TEST 88: Courses - Single Course - CORRECTED ID
GET {{baseURL}}/api/v1/courses/products/6001

### ‚úÖ TEST 93: Events - Single Event - CORRECTED ID
GET {{baseURL}}/api/v1/events/products/6501

### ‚úÖ TEST 98: Apps - Single App - CORRECTED ID
GET {{baseURL}}/api/v1/apps/products/7001

### ‚úÖ TEST 103: Flights - Single Flight - CORRECTED ID
GET {{baseURL}}/api/v1/flights/products/7501

### ‚úÖ TEST 108: Pets - Single Pet - CORRECTED ID
GET {{baseURL}}/api/v1/pets/products/8001

### ‚úÖ TEST 113: Real Estate - Single Property - CORRECTED ID
GET {{baseURL}}/api/v1/realestate/products/8501

###############################################
# üîß CORRECTED ENDPOINT TESTS
###############################################

### ‚úÖ TEST 145: Server Statistics - CORRECTED ENDPOINT
GET {{baseURL}}/api/v1/stats

### ‚úÖ TEST 146: API Version Info - CORRECTED ENDPOINT
GET {{baseURL}}/api/v1/version

### ‚úÖ TEST 147: Route Health Check - CORRECTED ENDPOINT
GET {{baseURL}}/api/v1/health

### ‚úÖ TEST 148: Route Testing - CORRECTED ENDPOINT
GET {{baseURL}}/api/v1/test

### ‚úÖ TEST 150: Performance Metrics - CORRECTED ENDPOINT
GET {{baseURL}}/performance

###############################################
# üîß CORRECTED INTEGRATION TESTS
###############################################

### Step 1: Register Unique User - CORRECTED
# @name integrationUser
POST {{baseURL}}/api/v1/auth/register
Content-Type: application/json

{
  "username": "integration{{$timestamp}}",
  "email": "integration{{$timestamp}}@test.com",
  "password": "integration123",
  "first_name": "Integration",
  "last_name": "Test"
}

### Step 2: Login New User - CORRECTED
# @name integrationLogin
POST {{baseURL}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "integration{{$timestamp}}",
  "password": "integration123"
}

### Step 3: Get User Profile - CORRECTED
GET {{baseURL}}/api/v1/auth/profile
Authorization: Bearer {{integrationLogin.response.body.data.token}}

### Step 4: Browse Products - CORRECTED
GET {{baseURL}}/api/v1/movies/products?page=1&limit=5
Authorization: Bearer {{integrationLogin.response.body.data.token}}

### Step 5: Search Products - CORRECTED
GET {{baseURL}}/api/v1/books/products/search?q=programming&page=1&limit=3
Authorization: Bearer {{integrationLogin.response.body.data.token}}

### Step 6: Get Product Details - CORRECTED
GET {{baseURL}}/api/v1/electronics/products/1001
Authorization: Bearer {{integrationLogin.response.body.data.token}}

### Step 7: Update Profile - CORRECTED
PUT {{baseURL}}/api/v1/auth/profile
Authorization: Bearer {{integrationLogin.response.body.data.token}}
Content-Type: application/json

{
  "first_name": "Updated",
  "last_name": "Integration"
}

### Step 8: Logout - CORRECTED
POST {{baseURL}}/api/v1/auth/logout
Authorization: Bearer {{integrationLogin.response.body.data.token}}

###############################################
# üîß CORRECTED ERROR TESTS
###############################################

### ‚úÖ TEST 121: Invalid Login Credentials - CORRECTED
POST {{baseURL}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "nonexistent{{$timestamp}}",
  "password": "wrongpassword"
}

### ‚úÖ TEST 122: Duplicate User Registration - CORRECTED
POST {{baseURL}}/api/v1/auth/register
Content-Type: application/json

{
  "username": "demo",
  "email": "demo@example.com",
  "password": "newpassword"
}

### ‚úÖ TEST 129: Search with Price Range - CORRECTED
GET {{baseURL}}/api/v1/books/products/search?min_price=10&max_price=50&page=1&limit=10

###############################################
# üéØ CORRECTED FINAL VERIFICATION
###############################################

### ‚úÖ TEST 152: Authentication Flow End-to-End - CORRECTED
POST {{baseURL}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "demo",
  "password": "demo123"
}

### ‚úÖ TEST 155: Final Root Check - CORRECTED
GET {{baseURL}}/
Accept: application/json

###############################################
# üìã CORRECTED PRODUCT ID REFERENCE
###############################################

### üéØ CORRECT PRODUCT IDs PER DOMAIN:
### Movies: 1-500
### Books: 501-1000
### Electronics: 1001-1500
### Restaurants: 1501-2000
### Fashion: 2001-2500
### Games: 2501-3000
### Music: 3001-3500
### Food: 3501-4000
### Toys: 4001-4500
### Hotels: 4501-5000
### Cars: 5001-5500
### Medicines: 5501-6000
### Courses: 6001-6500
### Events: 6501-7000
### Apps: 7001-7500
### Flights: 7501-8000
### Pets: 8001-8500
### Real Estate: 8501-9000
### Sports: 9001-9500
### Tools: 9501-10000

###############################################
# üöÄ TARGET: 100% SUCCESS RATE
###############################################

### üéØ EXPECTED RESULTS:
### ‚úÖ Authentication: All tokens work properly
### ‚úÖ Product IDs: All single product requests succeed
### ‚úÖ Endpoints: All utility endpoints respond
### ‚úÖ Integration: Complete user flow works
### ‚úÖ Error Handling: Proper error codes returned
### 
### üèÜ SUCCESS CRITERIA: 155/155 TESTS PASS

# END OF CORRECTED TESTS